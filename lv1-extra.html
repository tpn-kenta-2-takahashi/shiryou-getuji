<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lv.1 作成後日談 - NotebookLM活用メモ</title>
    <style>
        /* 基本設定 */
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            line-height: 1.8;
            color: #333;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }

        /* コンテナ */
        .container {
            max-width: 800px;
            margin: 40px auto;
            background: #fff;
            padding: 40px 60px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        /* 見出し */
        h1 {
            font-size: 28px;
            border-bottom: 2px solid #4285f4; /* Google Blue風 */
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            font-size: 22px;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 5px solid #4285f4;
            background-color: #f4f8ff;
            padding: 10px;
        }
        h3 {
            font-size: 18px;
            font-weight: bold;
            margin-top: 30px;
            color: #444;
        }
        h4 {
            font-size: 16px;
            font-weight: bold;
            margin-top: 25px;
            color: #555;
            display: flex;
            align-items: center;
        }

        /* テキスト装飾 */
        p { margin-bottom: 1.5em; }
        ul { margin-bottom: 1.5em; }
        li { margin-bottom: 0.5em; }
        strong {
            color: #d93025;
            background: rgba(217, 48, 37, 0.05);
            padding: 0 4px;
        }
        blockquote {
            background: #f1f3f4;
            border-left: 4px solid #9aa0a6;
            margin: 20px 0;
            padding: 15px 20px;
            font-size: 0.95em;
            color: #5f6368;
        }

        /* コードブロック */
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: "Consolas", "Monaco", monospace;
            font-size: 14px;
        }

        /* 画像エリア */
        .img-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #eee;
            border: 2px dashed #aaa;
            border-radius: 8px;
            height: 150px;
            margin: 20px 0;
            color: #666;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
        }
        
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin: 20px 0;
            display: block;
        }

        /* 2カラムレイアウト（画像比較用） */
        .row-2col {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }
        .col {
            flex: 1;
        }
        .col-caption {
            text-align: center;
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        /* ステップバッジ */
        .step-badge {
            background: #4285f4;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            margin-right: 8px;
            font-size: 0.8em;
        }
        .step-badge-green {
            background: #34a853; /* Google Green */
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            margin-right: 8px;
            font-size: 0.8em;
        }

        /* レスポンシブ */
        @media (max-width: 600px) {
            .container { padding: 20px; margin: 20px; }
            h1 { font-size: 24px; }
            .row-2col { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>✅ Lv.1 作成後日談 - NotebookLM活用メモ</h1>

    <h3>1. この後日談ページについて</h3>
    <p>
        本ページは、Lv.1資料（プロンプトエンジニアリング基礎）の<strong>おまけ（PS / 後日談）</strong>です。<br>
        資料本編は「何を学ぶか」をまとめていますが、ここでは「<strong>どう作ったか</strong>」「<strong>作る中で詰まったこと</strong>」「<strong>得られた学び</strong>」を残します。<br>
        <small>※文章量が多めなので、必要なところだけ拾ってもらえればOKです！</small>
    </p>

    <hr>

    <h3>2. ざっくり結論（先に要点）</h3>
    <ul>
        <li>NotebookLMのスライド生成は、<strong>たたき台作りとして強い</strong>（速い・一気に形になる）</li>
        <li>ただし現状は<strong>編集が難しい</strong>ので、納得いくまで「再生成」しがちで時間が溶ける</li>
        <li>対処としては、大きく分けて2つの方法が有効でした（詳細は後述）：
            <ul>
                <li>① <strong>上から貼る方式</strong>（PowerPointで強引に修正）</li>
                <li>② <strong>nanobanana再度利用方式</strong>（生成AIに修正画像を吐かせる）</li>
            </ul>
        </li>
    </ul>

    <h2>3. 作成の流れ（NotebookLMでの作り方）</h2>
    <p>今回の資料は、NotebookLMのスライド作成機能を使って作りました。流れはこんな感じです。</p>

    <h4><span class="step-badge">Step 1</span> 材料（ソース）を集める</h4>
    <p>NotebookLMに以下をソースとして入れました。</p>
    <ul>
        <li>今回の資料を作成する背景（自分のメモ）</li>
        <li>実務上で感じてきた疑問・役立ったことの殴り書きメモ</li>
        <li>インターネットで調べて参考になりそうな情報</li>
    </ul>

    <img src="images/notebooklmsource.png" alt="NotebookLMのソース画面">
        
    <h4><span class="step-badge">Step 2</span> スライド生成用の“プロンプト”を作る</h4>
    <p>
        NotebookLMにはスライドを出力する機能（nanobanana利用）があるのですが、<strong>スライド生成のためのプロンプト</strong>を作る必要がありました。<br>
        ここはNotebookLMやGeminiと対話しながらプロンプトを作りました。
    </p>
    <p>
        Geminiを使った理由は、<strong>NotebookLMのチャット欄に入力文字数制限（現在10,000文字まで使用できるそうなのですが、自分の環境では5,000文字程度しか入らなかった...）があったため</strong>です。<br>
        長い指示や複雑な構成案を練る段階では、Geminiで壁打ちをしてプロンプトを完成させ、それをNotebookLMに貼り付ける運用がスムーズでした。（画像はNotebookLMと壁打ちしている際のキャプチャです。）
    </p>

    <img src="images/sakusei.png" alt="NotebookLMとの壁打ちキャプチャ">
    
    <h4><span class="step-badge">Step 3</span> NotebookLMでスライドを生成する</h4>
    <p>
        作成したプロンプトをNotebookLMの「スライド資料作成」機能に入れて、<br>
        <strong>形式：詳細、長さ：デフォルト</strong> で生成しました。
    </p>
    <p>
        ※同じプロンプトで<strong>「プレゼンター向け」</strong>形式も試しましたが、いまいち違いが分かりませんでした。<br>
        プレゼンター形式の方が「説明しながら使う視覚寄り（文字少なめ）」なのかな？と感じましたが、大きな差は無いように感じました。
    </p>

    <div class="row-2col">
        <div class="col">
            <img src="images/hidari.png" alt="NotebookLMのソース画面">
            <div class="col-caption">▲ プレゼンター形式</div>
        </div>
        <div class="col">
            <img src="images/migi.png" alt="NotebookLMのソース画面">
            <div class="col-caption">▲ 詳細形式（今回採用）</div>
        </div>
    </div>

    <h2>4. 実際に使ったスライド生成プロンプト</h2>
    <p>以下が今回使ったプロンプトです。</p>

<pre><code>
---

### 【第1回 確定版】 Instruction Following の最適化
**～AIに「指示」を通す構造化技術と、その自動生成（Meta-Prompting）～**

* **スライド枚数:** 17枚
* **ターゲット:** エンジニア・実務担当者（「AIの挙動が安定しない」と悩む層）

---

#### ■ Section 1: 課題とメカニズム（Why）

**スライド1：表紙**
* **タイトル:** プロンプトエンジニアリングの基礎：Instruction Followingの最適化
* **サブタイトル:** ～なぜAIは指示を無視するのか？ 構造化による制御と自動生成～
* **ゴール:** プロンプトエンジニアリングを通して「意図通りの回答」を引き出す。

**スライド2：【導入】こんな「あるある（指示無視）」ありませんか？**
* **現象:**
    * 「200文字以内で」と書いたのに、平気で長文が返ってくる。
    * 「指示：「詳細を**省かないで**ください。」回答：「長いため**要約しました**...」（←AIの"気を利かせる"機能が暴発）
    * 「JSON形式で」と頼んだのに、全く違う形式（例：Markdownの表）で出力される。
* **問題提起:** これはAIの性格のせいではありません。**「プロンプトの構造」が悪いせいで、AIがどこを見ればいいか分かっていない**のです。

**スライド3：【原理】LLMは「確率」で次を予測している**
* **仕組み:**
    * LLMは質問の意味を理解しているわけではなく、入力されたテキストに続く「最も確率が高い単語（トークン）」を予測しているだけです。
    * **非決定論的性質:** 指示が曖昧だと、AIは学習データ（インターネット上の一般的な文章）に引っ張られ、あなたの独自の制約（JSONなど）よりも「一般的な会話の続き」を優先して出力してしまいます。

**スライド4：【原理】「Lost in the Middle」とAttentionの限界**
* **Attentionメカニズム:**
    * LLMは入力された文章の「どこに注目すべきか」を計算しています（Self-Attention）。
    * **Lost in the Middle:** しかし、プロンプトが長くなると、**「真ん中」に書かれた指示は埋もれやすく、無視される傾向**があります（Recency Biasにより、最初と最後が優先されるため）。
    * **結論:** 文章力ではなく、**「視覚的な区切り（構造化）」**でAttentionを強制的に誘導する必要があります。

---

#### ■ Section 2: 構造化と制御技術（How）

**スライド5：【解決策①】 共通言語「Markdown」によるSemantic Partitioning**
* **テクニック:** `###`（見出し）を活用する。
* **真の目的:**
    * 人間が読みやすくするためではありません。
    * **「望んだ回答を一発で出させる（Instruction Following）」ため**です。
* **Why（技術的根拠）:**
    * GPT-4やGemini等のモデルは、GitHub上のコードやドキュメントを大量に学習しています。そのため、Markdownの構文（`#` は見出し）を**「情報の意味的な区切り」**として強く認識するバイアスを持っています。

**スライド6：【解決策②】 データと命令を分ける「デリミタ」**
* **テクニック:** 区切り文字（Delimiters）の使用。
* **インジェクション対策:**
    * 処理対象のテキスト内に「〜してください」という言葉が含まれていると、AIがそれを命令と誤認することがあります（プロンプトインジェクションに近い挙動）。
* **実践:**
    * 対象データを `"""`（トリプルクォート）や `---`、XMLタグ `&lt;text&gt;` で囲む。
    * 「ここからここまでがデータ領域」と物理的な壁を作ります。

**スライド7：【解決策③】 Recency Biasをハックする「サンドイッチ話法」**
* **テクニック:** 重要な制約は「最後」にも書く。
* **Why:** スライド4の「Recency Bias（最後を重視する）」を利用します。
* **実践:**
    1.  冒頭で「JSON形式で出力して」と指示。
    2.  （入力データを挟む）
    3.  **最後に「念押し（Reminder）」として「余計な説明は不要。JSONのみ出力」と再掲する。**

**スライド8：【解決策④】 方向性を示す「Role Prompting（ペルソナ）」**
* **テクニック:** 「あなたは〜です」と役割を与える（Provide Direction）。
* **効果:**
    * 「コードを書いて」→ 一般的なコードが出る。
    * 「あなたは**セキュリティ専門家**です」→ 脆弱性を考慮したコードが出る。
    * **ポイント:** AIが探索する「確率の空間」を、専門的な領域に絞り込む効果があります。

---

#### ■ Section 3: 学習理論の応用（Few-Shot）

**スライド9：【理論】Zero-Shot vs Few-Shot**
* **Zero-Shot（ゼロショット）:**
    * 例を与えず、指示だけで解かせること。「この文章を要約して」など。
    * これだとAIは「一般的な正解」しか出せず、独自のフォーマットを守れません。
* **Few-Shot（フューショット）:**
    * 「入力と出力の例」を見せること。
    * AIはプロンプト内の例を見て、**その場でパターンを学習（In-Context Learning）**します。

**スライド10：【技術⑤】 最強の指示「Few-Shot Prompting」**
* **概念:**
    * AIに「やり方」を言葉で説明するのではなく、**「入力と正解のペア（事例）」**を見せて、タスクの**パターン**を学習させる技術。
* **実践例（感情分析タスク）：**
    * 言葉で「ネガティブなら-1、ポジティブなら+1、中立なら0」と説明するのは大変ですが、例なら一瞬です。
    * **Prompt Example:**
        text
        Text: 商品が届かない。
        Sentiment: -1

        Text: 最高に使いやすい！
        Sentiment: 1

        Text: 昨日は雨だった。
        Sentiment: 0

        Text: {{target_text}}
        Sentiment:
        
    * **効果:** これを見せるだけで、AIは「感情分析タスク」であること、「出力は数値のみ」であることを**文脈（Context）から悟ります**。

**スライド11：【技術⑥】 思考の連鎖「Chain of Thought (CoT)」**
* **テクニック:**
    * プロンプトに**「ステップ・バイ・ステップで考えてください」**と一言加える。
* **なぜ必要なのか（具体例）：**
    * **タスク:** 「リンゴが3個あります。2個買い足して、1個食べました。いま何個？」
    * **Zero-Shot（悪い例）:** 直感的に「5個」や「6個」と計算ミスをすることがある。
    * **CoT（良い例）:**
        * 「ステップ1: 最初に3個ありました。」
        * 「ステップ2: 2個買い足したので 3 + 2 = 5個になりました。」
        * 「ステップ3: 1個食べたので 5 - 1 = 4個です。」
        * **「答え：4個」**
* **効果:** 中間的な推論プロセスを出力させることで、論理の飛躍を防ぎ、正答率が劇的に向上します。

---

#### ■ Section 4: 自動化とテンプレート（Automation）

**スライド12：【課題】 正直、これを毎回書くのは「面倒」ですよね？**
* **本音:**
    * 「構造化が大事なのはわかった。でも、毎回 `### Constraints` とか `### Few-Shot` とか手打ちするのは面倒だし、難しい…」
    * 「プロンプトエンジニアリングなんて勉強したくない」
* **解決策:**
    * **「そのプロンプト自体を、AIに書かせればいい（Meta-Prompting）」**のです。

**スライド13：【解決策】 メタプロンプト（AIに指示書を書かせる）**
* **手法:**
    * AIは「AIへの指示書」を書くのが得意です。
    * 私たちは「やりたいこと」を雑に投げるだけで、AIが勝手に「黄金テンプレート」に変換してくれる仕組み（プロンプト）を用意しました。
    * これを使えば、**誰でも・一瞬で・精度の高い構造化プロンプト**が作れます。

**スライド14：【お試し】 プロンプト生成用プロンプト**
* **使い方：以下のプロンプトをコピーして、ChatGPTやGeminiに張り付けて実際に使用してみてください**

markdown
# Role
あなたは世界最高峰の「プロンプトエンジニア」です。
ユーザーの曖昧な【要望】を解析し、LLMの能力を最大限に引き出す「構造化されたプロンプト」を作成してください。

# User Request
{{ここに「要約してほしい」「JSONに変換して」など雑に入力}}

# Instructions
1. **目的の理解**: ユーザーの要望から、タスクの目的（要約、抽出、変換、創作など）を特定してください。
2. **構成要素の生成**: 以下の要素を含むプロンプトを作成してください。
    - `# Role`: タスクに最適な専門家のペルソナ。
    - `# Constraints`: 文字数、形式、禁止事項（やってはいけないこと）などの制約。
    - `# Few-Shot Examples`: 入力と理想的な出力のペア（最低1〜2つ）。**精度の肝です。**
    - `# Input Format`: 入力データを埋め込むための変数を `{{input_text}}` の形式で定義し、デリミタ `"""` で囲む構造にする。
    - `# Output Format`: JSON形式やmd形式などアウトプットの出力揺れを抑えます。
    - `# Reminder`: 末尾に「上記の制約を厳守し、出力を返してください」という念押し（サンドイッチ話法）を入れる。

# Output Rules
- 出力はMarkdown形式のコードブロックのみとすること。
- 解説や前置きは不要。作成したプロンプトだけを出力すること。

# Step-by-Step Execution
ユーザーの要望に基づき、最高のプロンプトを出力してください。




**スライド15：【プロンプト生成用プロンプトを使ってみた】 （想定：会議のメモから議事録を作成）**
**

* **使い方：前ページのプロンプトをコピーして、プロンプトを簡単に書いてみました。# Role
あなたは論理的で正確な記録を作成する「プロフェッショナルな秘書」です。

# Constraints

* 曖昧な表現を避け、具体的な決定事項を明確に記述すること。
* 文体は「だ・である」調で統一すること。
* 挨拶や主観的な感想は省き、事実のみを記載すること。

# Output Structure

以下のフォーマットに従って出力してください。

## 1. 会議概要

* 日時・参加者（テキストから読み取れる場合）

## 2. 決定事項（最重要）

* 合意された内容を箇条書きで記載

## 3. 議論の要点

* 決定に至るまでの経緯や重要な意見

## 4. Next Action

* 【誰が】【いつまでに】【何をするか】を明確に記載

# Input Data

"""
{{input_text}}
"""

# Reminder

「決定事項」の漏れは許されません。上記のフォーマットを厳守して出力してください。

こんな簡単なプロンプトでもGeminiの議事メモから成形した議事録を作りだす事ができますね。

**スライド16：まとめ & Next Step**

* **今日のまとめ:**
* AIは構造化（Markdown）で制御せよ。
* 言葉でダメなら例（Few-Shot）を見せろ。
* **面倒な構造化は、AI（メタプロンプト）にやらせろ。**
* **ただし、1発で100点の回答は求めない。生成AIは対話を通して精度を上げていくプロセスが非常に重要でありどんなに完璧なプロンプトを作ったとしても、一発で100点の回答が来るとは限りません。**



**スライド17：まとめ & Next Step**

* **次回予告:**
* 「これでプロンプトエンジニアリングの基礎を抑える事ができました。」
* 「しかし、対話を続けると…AIはバケツ（メモリ）が溢れて精度が低くなります。」
* 次回、**【第2回】コンテキストエンジニアリング：記憶の寿命と管理術**。



---

</code></pre>


<h2>5. 作ってみて困ったこと（課題）</h2>
<p>正直、便利な反面「編集」という意味では課題も多かったです。</p>
<ul>
    <li><strong>NotebookLMが生成した内容を部分的に修正するのが難しい</strong></li>
    <li>課題1：出力がPDFで、PNGなど画像化しても結局“編集できない”</li>
    <li>課題2：PDFをGeminiにスライド化してもらうと、文章や図のニュアンスがかなり変わる</li>
    <li>課題3：生成に時間がかかり、納得いかないとプロンプト修正→再生成になる。<br>しかも「1枚だけ直す」ができないので、直ったページと崩れたページが混在しがち。</li>
</ul>

<h2>6. 調べたこと（現時点の制限と対処方法）</h2>
<p>現時点では、出力形式に以下の制限があります。</p>
<ul>
    <li>スライドは <strong>PDF形式のみ</strong>（Google Slides / PowerPoint形式は未対応）</li>
    <li>NotebookLM上で生成されたスライドを直接<strong>編集できない</strong></li>
    <li>Geminiのcanvas機能を用いた修正を行う。スライドのテイストがいまいち（図や画像などが変わってしまう）</li>
    <li>pdfをpngなどの画像形式に変換して修正する※画像にしても<strong>図自体の編集はできない</strong>ので効果が薄い</li>      
</ul>

<p>
    ちなみに、出力結果では<strong>こういった文字がつぶれてしまったりするケース</strong>が実際にあります。<br>
    （これが編集できないというのが課題でありこれをどう直すか？というのが次の「対処法」になります）
</p>

<img src="images/shuuseimae.png" alt="キャプチャ">

<hr>

<h2>7. 現実的な対処法（自分が行った方法）</h2>
<p>
    編集できないPDFをどう修正するか。試行錯誤の結果、以下の2つの方法にたどり着きました。
</p>

<h3>方法①：上から貼る方式（PowerPoint活用）</h3>
<p>
    オーソドックスな力技な方法です。PDFを画像化（Adobe等の方法を用いてpdf→png、jpegに変更）してPowerPointに貼り、修正したい箇所の上に「背景と同じ色の図形」や「テキストボックス」を重ねて隠してしまいます。
</p>
<ul>
    <li><strong>Step 1:</strong> PDFを画像（PNG/JPEG）に変換する（Acrobatや変換ツールを使用）</li>
    <li><strong>Step 2:</strong> PowerPointの「フォトアルバム」機能で画像を一括取り込みする</li>
    <li><strong>Step 3:</strong> 修正箇所に上からテキストボックス等を被せて修正する</li>
</ul>

<img src="images/shuuseichu.png" alt="修正中">

<hr>

<h3>方法②：nanobanana再度利用方式（生成AI活用）</h3>
<p>
    これは思いつきで試した方法ですが、<strong>「nanobananaで作ったなら、nanobananaで修正できるのでは？」</strong>と考え、やってみたら上手くいきました！
</p>

<h4><span class="step-badge-green">Step 1</span> 修正箇所のキャプチャを撮る</h4>
<p>文字が潰れている箇所や、化けているスライドのスクリーンショットを撮ります。</p>

<h4><span class="step-badge-green">Step 2</span> プロンプトで修正を依頼する</h4>
<p>
    その画像をAI（nanobanana等）に渡し、以下のようなプロンプトを流します。<br>
    <code>「この画像、文字が化けている/潰れているのできれいにしてください。（フォント、構成、図の配置などは全く変えなくて大丈夫です）」</code>
</p>

<img src="images/nanobananashuusei.png" alt="NotebookLMのソース画面">

<h4><span class="step-badge-green">Step 3</span> 生成された画像を貼り付ける</h4>
<p>
    きれいに再生成された画像をコピーして、元のスライド（PowerPoint等）に貼り付ければ完了です。
</p>

<img src="images/00000.jpg" alt="NotebookLMのソース画面">

<p>
    <strong>▼ 最終的な仕上がり例</strong><br>
    作成させた文字画像を上からかぶせることで「情報」という文字が潰れていたのが、きれいに修正されているのが分かると思います。
</p>
<img src="images/shuuseigo.png" alt="NotebookLMのソース画面">


<hr>

<h3>8. まとめ（感想）</h3>
<p>
    直接編集ができないなど課題はあるものの、ここまで精度が高く分かりやすい資料を“たたき台”として一気に作れるのはかなり強いと感じました。<br>
    今後は上記の「上から貼り付け」と「AIによる再生成」の2つを使い分けながら活用していくつもりです。（まだまだスマートなやり方があると思うので模索しながら使用していきたいです！）
</p>
<p>
    ただどの修正方法も時間がかかってしまうので、<strong>NotebookLMに「Googleスライド形式での出力機能」が搭載されることを心から祈っています！笑</strong>
</p>



</div>

</body>
</html>



